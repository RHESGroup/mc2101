# Folder structure
    ├── scripts
    │   ├── add_mems.tcl
    │   ├── add_sources.tcl
    │   ├── prologue.tcl
    │   ├── run.tcl
    │   ├── script_mc2101.tcl
    │   ├── script_uart_fifo.tcl
    │   ├── script_uart_interrupt.tcl
    │   ├── script_uart_periph.tcl
    │   ├── script_uart_rx_core.tcl
    │   ├── script_uart_tx_core.tcl
    ├── src
    │   ├── blk_mem_gen_0.vhd
    │   ├── gpio.vhd
    │   ├── gpio_core.vhd
    │   ├── gpio_pad.vhd
    │   ├── gpio_pads_if.vhd
    │   ├── mc2101_wrapper.vhd
    │   ├── tb_bram.vhd
    │   ├── tb_gpio_pad.vhd
    │   ├── tb_gpios_pad.vhd
    │   ├── tb_mc2101.vhd
    │   ├── tb_uart_fifo.vhd
    │   ├── tb_uart_interrupt.vhd
    │   ├── tb_uart_interrupt.vhd
    │   ├── tb_uart_periph.vhd
    │   ├── tb_uart_rx_core.vhd
    │   ├── tb_uart_tx_core.vhd
    │── util
    │   ├── uartFIFO_values.mem
    │   ├── uartINTERRUPT_values.mem
    │   ├── uartPeriph_values.mem
    │   ├── uartRX_values.mem
    │   ├── uartTX_values.mem
    └── SIM.mk


# Folder description 
This folder is associated with the environment to simulate the MC2101.
The source files are intended to work in any simulator. However, the current flow mainly focuses on the simulation on Vivado. 
Designers are encouraged to modify the flow to be able to work with other simulation environments like QuestaSim.

## Scripts
### add_mems.tcl
The purpose of this script is to streamline and automate the setup of a new Vivado project with predefined settings. It sets up the project environment, specifies the target FPGA part and board, sets the target language, and optimizes resource usage by setting the number of threads.
### add_sources.tcl
This script is automatically generated by Bender. It includes all the source files to be included in the project.
### prologue.tcl
The purpose of this script is to streamline and automate the setup of a new Vivado project with predefined settings. It sets up the project environment, specifies the target FPGA part and board, sets the target language, and optimizes resource usage by setting the number of threads.
### run.tcl
This script automates the initial setup of a Vivado project by defining the current working directory, setting the board type, sourcing additional scripts to add source files and memory files to the project and specifying the top module of the design.
### script_mc2101.tcl
This script sets up the simulation environment for the mc2101 project by opening the project, checking for existing simulation sets and creating one if necessary, launching the simulation and configuring the waveform viewer and adding relevant signals for monitoring.
### script_uart_fifo.tcl
This script sets up the simulation environment for the uart fifo by opening the project, checking for existing simulation sets and creating one if necessary, launching the simulation and configuring the waveform viewer and adding relevant signals for monitoring.
### script_uart_interrupt.tcl
This script sets up the simulation environment for the uart interrupt by opening the project, checking for existing simulation sets and creating one if necessary, launching the simulation and configuring the waveform viewer and adding relevant signals for monitoring.
### script_uart_periph.tcl
This script sets up the simulation environment for the uart peripheral by opening the project, checking for existing simulation sets and creating one if necessary, launching the simulation and configuring the waveform viewer and adding relevant signals for monitoring.
### script_uart_rx_core.tcl
This script sets up the simulation environment for the uart RX core by opening the project, checking for existing simulation sets and creating one if necessary, launching the simulation and configuring the waveform viewer and adding relevant signals for monitoring.
### script_uart_tx_core.tcl
This script sets up the simulation environment for the uart TX core by opening the project, checking for existing simulation sets and creating one if necessary, launching the simulation and configuring the waveform viewer and adding relevant signals for monitoring.
## src
This sufolder contains all the source files required for simulating the design. It has multiple testbenches associated with the MC2101's peripherals.

## util
This subfolder includes multiple mem files that are used by the VHDL files as values for simulation.

## SIM.mk
This Makefile is designed to automate various tasks involved in the creation and simulation of the project.
Run the following on the terminal to ask for more details:
```
make -f SIM.mk help
```
REMINDER: remember to specify the environment that you are going to use. 
EXAMPLE:
```
make -f SIM.mk sim_system sim=VIVADO
```

## Simulation flow
To be able to run simulations, one has to create the project and then run the particular simulation script by selecting one makefile target.
In particular, one has to generate the spi_stim.txt before running the simulation. 

To do it, the person should follow the steps explained in the section "Generating .coe file" of README file of the sw folder. Every time somebody runs the "spi_to_mif.sh" script, the spi_stim.txt is updated with the values corresponding to the application previously selected.


